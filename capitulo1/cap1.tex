\chapter{Introdução} \label{cap:cap1}
\outlineon=1

\outline{
\begin{itemize}
\item WSN são redes de sensores com recursos \dots
\end{itemize}
}


As Redes de Sensores Sem Fio (RSSF) são compostas de pequenos dispositivos equipados com uma antena de comunicação sem fio, um ou mais tipos de sensores, e uma CPU de baixa capacidade de processamento de dados \cite{Baronti:JCC07}. Estes dispositivos geralmente são chamados de \textit{motes}. Devido ao alcance do sinal de rádio limitado e da restrição energética uma RSSF tem limitações e caracteristicas únicas que a difere de redes de computadores e sistemas distribuídos tradicionais \cite{arampatzis2005survey}.

As RSSF tem várias aplicações em diversos campos. A implantação de sensores em aplicações militares foi sempre muito difundido, de modo que a introdução de \textit{motes} era uma incorporação natural para o avanço dos sistemas já utilizados. Aplicações que foram aprimoradas com o uso de RSSF incluem o rastreamento de inimigos e alvos \cite{yang2003}, monitoramento de veículos \cite{sinopoli2003}, sistema contra atirador \cite{simon2004} e sistemas de vigilância \cite{gui2004}. Monitoramento ambiental também provê oportunidades para aplicação de redes sensores sem fio. Nosso meio ambiente tem uma gama muito grande de informações que desempenham um papel importante em nossa qualidade de vida, como a qualidade do ar, água, som e radiação solar que estamos expostos todos os dias e que diretamente afetam nossa saúde \cite{oliveira2011wireless,oliver2004}. Com o interesse cada vez maior em coputação verde nos leva as preocupações com o consumo de energia eletrica em instalações de TI \cite{Chong:IEEEDT14}, e as RSSF têm um papel estratégico no monitoramento e controle destes ambientes \cite{bruno2014}.


Algumas dessas aplicações requerem mecanismos de sincronização de tempo com boa precisão e escalabilidade, tudo isso em conformidade com os seus baixos recursos computacionais e disponibilidade energética \cite{bruno2014,simon2004,yang2003}. Métodos de sincronização tradicionais, como NTP \cite{mills1991}, amplamente utilizado em servidores e clientes de rede não se aplicam em RSSF devido a fatores não determinístas relacionados com o acesso ao meio na transmissão sem fio dos sensores. O Flooding Time Synchronization Protocol (FTSP) é o algoritmo de sincronização de relógio mais popular para RSSF \cite{maroti2004}, ele é tolerante a falhas, consegue alta precisão ($\sim 1,5\mu{s}$ por salto) utilizando \textit{timestamps} em camadas baixas da pilha de rádio, usa a técnica de regressão linear para compensar o escorregamento do relógio usando poucas mensagens pela rede. Contudo, \textit{timestamps} na camada MAC não é um recurso padronizado, e portanto, não interoperáveis entre diferentes hardware e protocolos da camada física. Há um esforço do Google para padronizar \textit{timestamping} na camada MAC em RSSF \cite{Wang:Patent09}, mas até agora não há muita conformidade.

Muitos protocolos de sincronização usam MAC timestamp: alguns têm menos precisão do que o FTSP, eles se concentram em outros problemas e fazem suposições mais restritivas \cite{Ganeriwal:Sensys03, vanGreunen:WSNA03}; outros podem conseguir uma melhor precisão entre os nós distantes \cite{Zhang:LNCS07,Lenzen:Sensys09,Sommer:IPSN09}. Elson et ai. propôs o Reference Broadcast Synchronization \cite{Elson:SIGOPS02} (RBS) para eliminar a incerteza do remetente sem MAC timestamp removendo o \textit{sender} do caminho crítico. A idéia é que um terceiro irá transmitir um \textit{beacon} para todos os receptores. O \textit{beacon} não contém qualquer informação de tempo; em vez disso os receptores irão comparar seus relógios um ao outro para calcular o escorregamento de seus relógios. Tem $\sim 30\mu{s}$ erro por salto e é independente da MAC timestamp. Ranganathan e Nygard oferecem uma boa visão geral desses protocolos \cite{Ranganathan:IJU10}.


\section{Sincronização em Redes Sensores Sem Fio}

\outline{
    Razões e desafios.
    NTP e GPS, Necessidade de algoritmos de sincronização especificos para RSSF.
\begin{itemize}
 \item Intro sobre redes sensores sem fio.
 \item Necessidade da Sincronização em sistemas distribuídos.
 \item Problemas inerentes a sincronização, fontes de atraso e imprecisão em RSSF
\end{itemize}
}

Em sistemas distribuídos como as redes de sensores sem fio, cada nó tem seu próprio relógio e sua própria percepção de tempo. No entanto, uma escala de tempo comum entre nós sensores é importante para identificar relações entre eventos que estejam sendo monitorados, para apoiar a eliminação de dados redundantes de sensores e para facilitar a operação da rede. Uma vez que cada nó em uma rede de sensores opera de forma independente e conta com o seu próprio relógio, as leituras do relógio de diferentes nós de sensores também será diferente. Além destas diferenças aleatórias, a diferença entre os relógios de sensores diferentes vai aumentar ainda mais devido às taxas de escorregamento de diferentes osciladores. Portanto, o relógio ou tempo de sincronização é necessário para assegurar que os tempos de detecção podem ser comparados de uma forma significativa. 

Embora as técnicas de sincronização de tempo para redes com fios receberam uma quantidade significativa de atenção, esses métodos não são apropriados para uso em RSSF sem modificação, devido aos desafios colocados pelos ambientes sensores sem fio. Estes desafios incluem o tamanho das redes de sensores, a necessidade de auto-configuração e robustez, a mobilidade dos sensores além da necessidade primordial de conservação de energia \cite{Elson2001}.

Nas RSSF a eficiência energética é uma necessidade básica para seu funcionamento, em uma rede de larga escala não é possível fornecer uma fonte de energia para toda a rede, esses sensores geralmente são acoplados a uma bateria. Devido ao tamanho dos dispositivos a quantidade de energia que eles podem produzir ou armazenar é muito limitada \cite{sundararaman2005}.

Sincronização de tempo é um serviço necessário para muitas aplicações e serviços em sistemas distribuídos em geral. Numerosos protocolos de sincronização de tempo têm sido propostos para ambos os sistemas com e sem fio, por exemplo, o Network Time Protocol (NTP) \cite{mills1991} é uma abordagem de sincronização escalável, robusto e auto-configurável amplamente utilizado. Especialmente em combinação com o Sistema de Posicionamento Global (GPS), tem sido utilizado para alcançar a precisão da ordem de alguns microssegundos. No entanto, abordagens como NTP não são adequados para RSSFs devido a ser ineficiente neste contexto pois necessita de maior quantidade de memória. Já o uso de GPS pode elevar o custo de implantação de um sistema de monitoramento, além de requerer vários minutos para sintonizar, GPS também necessita de um uso maior de energia.

%\section{Básico de Sincronização de Tempo}
\subsection{Conceitos Básicos}

\outline{
     Efeitos do Ambiente.
     Restrição energética.
     Mobilidade e acesso ao meio sem fio.
     Capacidade dos dispositivos.
}

%A sincronização é normalmente baseada em algum tipo de troca de mensagens entre os nós sensores.

Os relógios dos \textit{motes} nas RSSF são baseados em osciladores de quartzo, o tempo é mensurado nas oscilações do cristal em conjunto a um contador, este contador tem seu valor decrementado até atingir zero, então ele reinicia novamente para seu valor padrão e o processo continua indeterminadamente, toda vez que o contador chega a zero é gerado uma interrupção e essa interrupção é chamada de \textit{tick} ou \textit{clock tick}, ela incrementa outro contador o do relógio a nível de \textit{software} que é de onde vem tempo que utilizamos no sistema operacional. Com isso, esse relógio de \textit{software} fornece para o \textit{mote} um valor de tempo local (\textit{local time}).

Supondo a existência de dois nós, cada um com o seu próprio relógio, onde $R(t)$ simboliza o valor do relógio no tempo $t$, sendo $t$ o tempo de referência. Se verificarmos $R(t)$ de ambos os nós podemos encontrar uma diferença entre os tempos, essa diferença é chamada de \textit{clock offset}. Para corrigir esta diferença é necessário realizar uma sincronização para que os tempos sejam iguais ou que a diferença seja tão pequena quanto possível. Ainda temos a frequência do relógio (\textit{clock rate}), que é 


\subsection{Mensagens de Sincronização}
\outline{
    \textit{Pairwise synchronization, One-Way Message Exchange, Two-Way Message Exchange, Receiver-Receiver Synchronization}
}

\subsection{Fontes de Imprecisão em Comunicação}

\outline{
    Send delay:
    Access delay:
    Propagation delay:
    Receive delay:
}

\section{Definição do Problema}

\outline{Dependência de hardware, padronização do recurso, esforço para que exista futuramente um padrão que esteja presente em todos os tipos de \textit{motes} e possibilite assim a interoperação de protocolos de MAC \textit{timestamp} em sistemas heterogênios.}

\section{Motivação do Trabalho}

\outline{
\begin{itemize}
   \item Devido a diversidade de dispositivos e o bom desempenho do FTSP, tona-lo um protocolo independente de recurso de hardware possibilitando o seu funcionamento em \textit{motes} sem o recurso de MAC timestamp.
\end{itemize}
}


\section{Contribuição da Dissertação}\label{sec:contrib}
\outline{
\begin{itemize}
 \item Fazer o FTSP funcionar com timestamp a nível de aplicação.
\end{itemize}
}
 

\section{Organização do Documento}\label{sec:org}


Esta dissertação é composta por seis capítulos. Descrever no final o que cada capítulo apresenta.

\begin{itemize}
 \item \textbf{Capítulo 2:} Descrever conteúdo aqui.
 \item \textbf{Capítulo 3:} Descrever conteúdo aqui.
 \item \textbf{Capítulo 4:} Descrever conteúdo aqui.
 \item \textbf{Capítulo 5:} Descrever conteúdo aqui.
 \item \textbf{Capítulo 6:} Descrever conteúdo aqui.
 \item \textbf{Capítulo 7:} Descrever conteúdo aqui.
\end{itemize}
